
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="renderer" content="webkit">
<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" id="viewport" name="viewport">
<title>m3u8解析</title>
<style type="text/css">body, html, .dplayer {padding: 0;margin: 0;width: 100%;height: 100%;color: #aaa;background-color: #000;}a{text-decoration: none;}</style>
<script type="text/javascript" src="hls.min.js"></script>
<script type="text/javascript" src="DPlayer.min.js"></script>
<link type="text/css" href="DPlayer.min.css" rel="stylesheet">
</head>
<body>
<div id="dplayer"></div>
<script type="text/javascript">
	var urlParams = queryURLParams(location.href);
	if (urlParams != null) {
		var url = urlParams.url;
		if (url != null) {
			const dp = new DPlayer({
				container: document.getElementById('dplayer'),
				autoplay: true,
				loop: false,
				video: {
					url: url,
					type: 'hls'
				},
			});
		}
	}

function queryURLParams(url) {
    // const url = location.search; // 项目中可直接通过search方法获取url中"?"符后的字串
    let params = url.split("?")[1];
	if (params == null) {
		return;
	}
    let obj = {}; // 声明参数对象
    let arr = params.split("&"); // 以&符号分割为数组
    for (let i = 0; i < arr.length; i++) {
      let arrNew = arr[i].split("="); // 以"="分割为数组
      obj[arrNew[0]] = arrNew[1];
    }
    return obj;
  }
</script>

</body>
</html>